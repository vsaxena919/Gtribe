!function(c){"use strict";c(document).ready(function(){jQuery().niceSelect&&c(".youzer select").not('[multiple="multiple"]').niceSelect(),c(document).on("click",".yz-upload-photo",function(e){e.preventDefault();var o=document.getElementById(c(this).attr("for"));if(o&&document.createEvent){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!1),o.dispatchEvent(t)}}),c(document).on("change",".yz_upload_file",function(e){e.stopPropagation();var o=new FormData,t=c(this),a=c(this)[0].files[0],n=c(this).closest(".yz-uploader-item"),r=n.find(".yz-photo-preview"),i=n.find(".yz-photo-url").val(),s=n.find(".yz-photo-thumbnail").val(),l=c(this).closest("form").find("input[name='security']").val();o.append("nonce",l),o.append("file",a),o.append("action","upload_files"),c.ajax({url:Youzer.ajax_url,type:"POST",data:o,contentType:!1,cache:!1,processData:!1,beforeSend:function(){c('<div class="yz-load-photo"><i class="fas fa-spinner fa-spin"></i></div>').hide().appendTo(r).fadeIn(800)},success:function(e){t.val("");var o=c.parseJSON(e);if(o.error)return r.find(".yz-load-photo").fadeOut(300).remove(),void c.yz_DialogMsg("error",o.error);i&&(c.yz_DeletePhoto(i),c.yz_DeletePhoto(s)),r.find(".yz-load-photo").fadeOut(300,function(){c(this).remove(),r.fadeOut(100,function(){c(this).css("background-image","url("+o.upload_url+o.thumbnail+")").fadeIn(400),n.find(".yz-photo-url").val(o.original).change(),n.find(".yz-photo-thumbnail").val(o.thumbnail).change(),n.find(".yz-delete-photo").addClass("yz-show-trash");var e=n.closest("form").serialize()+"&die=true";c.post(Youzer.ajax_url,e)})})}})}),c(".yz-account-menu").on("click",function(e){var o=c(this).next(".yz-account-menus");o.hasClass("yz-show-account-menus")&&o.removeClass("yz-show-account-menus").css("display","block"),c(this).next(".yz-account-menus").slideToggle()}),c(document).on("click",".yz-delete-photo",function(e){c(this).closest("form").attr("id");var o=c(this).closest(".yz-uploader-item"),t=o.find(".yz-photo-url").val(),a=o.find(".yz-photo-thumbnail").val();o.find(".yz-photo-url").val("").trigger("change"),o.find(".yz-photo-thumbnail").val("").trigger("change"),c.yz_DeletePhoto(t),c.yz_DeletePhoto(a),o.find(".yz-photo-preview").css("background-image","url("+Yz_Account.default_img+")"),c(this).removeClass("yz-show-trash");var n=o.closest("form").serialize()+"&die=true";c.post(Youzer.ajax_url,n)}),c.yz_DeletePhoto=function(e){var o=new FormData;o.append("attachment",e),o.append("action","yz_delete_account_attachment"),c.ajax({type:"POST",data:o,url:Youzer.ajax_url,contentType:!1,processData:!1})},c(".yz-account-photo .yz-photo-url").on("change",function(e){e.preventDefault();var o=c(this).val();o||(o=Yz_Account.default_img),c(".yz-account-img").fadeOut(200,function(){c(this).css("background-image","url("+o+")").fadeIn(200)})}),c(".yz-user-provider-unlink").on("click",function(e){if(e.preventDefault(),c(this).hasClass("loading"))return!1;var t=c(this).closest(".yz-user-provider-connected"),a=c(this);a.addClass("loading");var o={action:"yz_unlink_provider_account",provider:c(this).data("provider"),security:c(this).data("nonce")};c.post(ajaxurl,o,function(e){var o=c.parseJSON(e);return o.error?(a.removeClass("loading"),c.yz_DialogMsg("error",o.error),!1):o.action?(a.removeClass("loading"),t.find(".yz-user-provider-token").val(""),t.find(".yz-user-provider-box").remove(),t.removeClass().addClass("yz-user-provider-unconnected"),c.yz_DialogMsg("success",o.msg),!1):void 0}).fail(function(e,o,t){return a.removeClass("loading"),c.yz_DialogMsg("error",Youzer.unknown_error),!1})})})}(jQuery);