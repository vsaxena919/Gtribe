function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){e.fn.rtFieldDependency=function(t){this._targets=e(this),this._settings=e.extend({attribute:"rt-depends",rules:{}},t);var a=this,r=function(e,t,a){if(void 0===a&&(a=!1),null==e&&(e=[]),1==a)return e.sort().join(",").toLowerCase()==t.sort().join(",").toLowerCase();for(var r=0;r<e.length;r++)if(t.indexOf(e[r])>=0)return!0;return!1},n=function(t,a){return e.inArray(t,a)>=0&&e.isArray(a)},s=function(t){if("null"==typeof t||void 0===t)return!0;if("string"==typeof t)return""===e.trim(t);if("object"==(void 0===t?"undefined":_typeof(t))){if(e.isArray(t)){var a=e.map(t,function(t,a){return""===e.trim(t)?null:t});return e.isEmptyObject(a)}return e.isEmptyObject(t)}return!1};return this.typeRegExpDependency=function(t,a){if("undefined"==typeof useEvent&&(useEvent=!1),void 0===e(parent).prop("tagName"))return!1;var r=e(parent).prop("tagName").toLowerCase()+":"+e(parent).prop("type").toLowerCase(),n=e.trim(e(parent).val());switch(r){case"input:text":case"input:password":case"input:number":case"input:date":case"input:email":case"input:url":case"input:tel":case"textarea:textarea":var s=void 0===a.modifier?"":a.modifier;new RegExp(a.pattern,s).test(n)?e(element).show():e(element).hide()}useEvent&&e(document.body).on("input",e(parent),function(e){typeRegExpDependency(element,a,parent,!1)})},this.typeEmptyDependency=function(t,a){if(void 0===e(t).prop("tagName"))return!1;var r=!1,n=e(t).prop("tagName").toLowerCase()+":"+e(t).prop("type").toLowerCase(),c=e(t).val();switch(n){case"input:text":case"input:password":case"input:number":case"input:date":case"input:email":case"input:url":case"input:tel":case"textarea:textarea":case"select:select-one":""===e.trim(c)&&(r=!0);break;case"input:checkbox":e(t).is(":checked")||""!==e.trim(c)||(r=!0);break;case"select:select-multiple":s(c)&&(r=!0)}return r},this.typeNotEmptyDependency=function(t,a){if(void 0===e(parent).prop("tagName"))return!1;var r=!1,n=e(parent).prop("tagName").toLowerCase()+":"+e(parent).prop("type").toLowerCase(),c=e(parent).val();switch(n){case"input:text":case"input:password":case"input:number":case"input:date":case"input:email":case"input:url":case"input:tel":case"textarea:textarea":case"select:select-one":""!=e.trim(c)&&(r=!0);break;case"input:checkbox":e(parent).is(":checked")&&""!=e.trim(c)&&(r=!0);break;case"select:select-multiple":s(c)&&(r=!0)}return r},this.typeEqualDependency=function(t,a){if(void 0===e(t).prop("tagName"))return!1;var c=!1,p=e(t).prop("tagName").toLowerCase()+":"+e(t).prop("type").toLowerCase(),i=e(t).val(),u=void 0!==a.like;if(a.empty=void 0!==a.empty&&a.empty,a.strict=void 0!==a.strict&&a.strict,u){var o=e(a.like).prop("tagName").toLowerCase()+":"+e(a.like).prop("type").toLowerCase();"input:checkbox"==o||"input:radio"==o?a.value=e(a.like+":checked").map(function(){return this.value}).get():(a.value=e(a.like).val(),showOnEmptyValue||(a.value=""==e.trim(e(a.like).val())?null:e(a.like).val()))}switch(p){case"input:text":case"input:password":case"input:number":case"input:date":case"input:email":case"input:url":case"input:tel":case"textarea:textarea":case"select:select-one":e.trim(i)===a.value?c=!0:n(i,a.value)?c=!0:""===e.trim(i)&&a.empty&&(c=!0);break;case"input:checkbox":case"input:radio":var l=e(t+":checked").map(function(){return this.value}).get();l===a.value?c=!0:n(l,a.value)?c=!0:r(l,a.value,a.strict)?c=!0:s(l)&&a.empty&&(c=!0);break;case"select:select-multiple":r(value,a.value,a.strict)?c=!0:null==i&&a.empty&&(c=!0)}return c},this.typeNotEqualDependency=function(t,a){if(void 0===e(t).prop("tagName"))return!1;var c=!1,p=e(t).prop("tagName").toLowerCase()+":"+e(t).prop("type").toLowerCase(),i=e(t).val(),u=void 0!==a.like;if(a.strict=void 0!==a.strict&&a.strict,a.empty=void 0===a.empty||a.empty,u){var o=e(a.like).prop("tagName").toLowerCase()+":"+e(a.like).prop("type").toLowerCase();"input:checkbox"==o||"input:radio"==o?a.value=e(a.like+":checked").map(function(){return this.value}).get():(a.value=e(a.like).val(),showOnEmptyValue||(a.value=""==e.trim(e(a.like).val())?null:e(a.like).val()))}switch(p){case"input:text":case"input:password":case"input:number":case"input:date":case"input:email":case"input:url":case"input:tel":case"textarea:textarea":case"select:select-one":c=i!=a.value&&(!n(i,a.value)&&!(""==e.trim(i)&&!a.empty));break;case"input:checkbox":case"input:radio":i=e(t+":checked").map(function(){return this.value}).get(),void 0===a.strict&&(a.strict=!1),c=i!=a.value&&(!n(i,a.value)&&(!r(i,a.value,a.strict)&&!(s(i)&&!a.empty)));break;case"select:select-multiple":c=!r(i,a.value,a.strict)&&!(null==i&&!a.empty)}return c},this.typeCompareDependency=function(t,a){var r=!1;if(void 0===e(t).prop("tagName"))return!1;e(t).prop("tagName").toLowerCase(),e(t).prop("type").toLowerCase();var n=parseInt(e(t).val());switch(a.value=parseInt(a.value),a.sign){case"<":case"lt":case"lessthen":case"less-then":case"LessThen":n<a.value&&(r=!0);break;case"<=":case"lteq":case"lessthenequal":case"less-then-equal":case"LessThenEqual":case"eqlt":n<=a.value&&(r=!0);break;case">=":case"gteq":case"greaterthenequal":case"greater-then-equal":case"GreaterThenEqual":case"eqgt":n>=a.value&&(r=!0);break;case">":case"gt":case"greaterthen":case"greater-then":case"GreaterThen":n>a.value&&(r=!0)}return r},this.typeRangeDependency=function(t,a){if(void 0===e(t).prop("tagName"))return!1;var r,n,s=!1,c=(e(t).prop("tagName").toLowerCase(),e(t).prop("type").toLowerCase(),parseInt(e(t).val()));return e.isArray(a.value)&&(r=parseInt(a.value[0]),n=parseInt(a.value[1])),void 0===a.value&&(r=parseInt(a.min),n=parseInt(a.max)),r<c&&c<n&&(s=!0),s},this.typeLengthDependency=function(t,a){if(void 0===e(parent).prop("tagName"))return!1;var r=!1,n=(e(parent).prop("tagName").toLowerCase(),e(parent).prop("type").toLowerCase(),e(parent).val().length);switch(a.value=parseInt(a.value),a.sign){case"<":case"lt":case"lessthen":case"less-then":case"LessThen":n<a.value&&(r=!0);break;case"<=":case"lteq":case"lessthenequal":case"less-then-equal":case"LessThenEqual":case"eqlt":n<=a.value&&(r=!0);break;case">=":case"gteq":case"greaterthenequal":case"greater-then-equal":case"GreaterThenEqual":case"eqgt":n>=a.value&&(r=!0);break;case">":case"gt":case"greaterthen":case"greater-then":case"GreaterThen":n>a.value&&(r=!0)}return r},this.useRuleType=function(t,a){var r=!1,n=this;e.each(a.rules,function(e,t){switch(t.type){case"empty":r=n.typeEmptyDependency(e,t);break;case"notempty":case"not-empty":case"notEmpty":case"!empty":r=n.typeNotEmptyDependency(e,t);break;case"equal":case"==":case"=":r=n.typeEqualDependency(e,t);break;case"!equal":case"notequal":case"!=":case"not-equal":case"notEqual":r=n.typeNotEqualDependency(e,t);break;case"regexp":case"expression":case"reg":case"exp":r=n.typeRegExpDependency(e,t);break;case"compare":case"comp":r=n.typeCompareDependency(e,t);break;case"length":case"lng":r=n.typeLengthDependency(e,t);break;case"range":r=n.typeRangeDependency(e,t)}return("and"!==a.relation.toLocaleLowerCase()||!0!==r)&&(("or"!==a.relation.toLocaleLowerCase()||!1!==r)&&void 0)}),r?e(t).show("slow"):e(t).hide("slow")},this._targets.each(function(){var t=e(this),r=t.data(a._settings.attribute.replace("data-","").trim());if(r){t.addClass("has-dependent-data");var n=e.extend({rules:{},relation:"or"},r),s=Object.keys(n.rules);s.length&&(a.useRuleType(t,n),e(document.body).on("input change",e(s.join(",")),function(e){a.useRuleType(t,n)}))}})}}(jQuery);
